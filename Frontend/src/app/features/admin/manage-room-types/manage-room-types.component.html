<div class="page-header">
  <h2>Manage Room Types</h2>
  <button class="btn-add" (click)="openAddModal()">
    <i class="fa-solid fa-plus"></i> Add Room Type
  </button>
</div>

@if (isLoading) {
  <div class="loading-state">Loading...</div>
} @else {
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Type Name</th>
          <th>Capacity</th>
          <th>Description</th>
          <th class="actions-col">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (type of roomTypes; track type.id) {
          <tr>
            <td>#{{ type.id }}</td>
            <td class="fw-bold">{{ type.typeName }}</td>
            <td>{{ type.capacity }} Person(s)</td>
            <td class="text-muted small">{{ type.description }}</td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon edit" (click)="openEditModal(type)">
                  <i class="fa-solid fa-pen"></i>
                </button>
                <button class="btn-icon delete" (click)="deleteRoomType(type.id)">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}

@if (showModal) {
  <div class="modal-overlay">
    <div class="modal-card">
      <div class="modal-header">
        <h3>{{ isEditing ? 'Edit Type' : 'Add Room Type' }}</h3>
        <button class="btn-close" (click)="closeModal()"><i class="fa-solid fa-xmark"></i></button>
      </div>

      <form (ngSubmit)="typeForm.form.valid && saveRoomType()" #typeForm="ngForm">

        <div class="form-group">
          <label>Type Name <span class="text-danger">*</span></label>
          <input type="text" [(ngModel)]="currentType.typeName" name="typeName" required>
        </div>

        <div class="form-group">
          <label>Capacity (Persons) <span class="text-danger">*</span></label>
          <input type="number" [(ngModel)]="currentType.capacity" name="capacity" required min="1">
        </div>

        <div class="form-group">
          <label>Description <span class="text-danger">*</span></label>
          <textarea
            [(ngModel)]="currentType.description"
            name="description"
            required
            rows="3"
            class="form-control"></textarea>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-cancel" (click)="closeModal()">Cancel</button>
          <button type="submit" class="btn-save" [disabled]="typeForm.invalid">Save</button>
        </div>
      </form>
    </div>
  </div>
}
